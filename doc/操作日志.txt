2017.02.--

1、数据模型: 调整医嘱条目（Order）和医嘱类型应用（OrderTypeApp）一对一关系的方向（由OrderTypeApp2Order变为Order2OrderTypeApp）
2、实现模型：编写删除医嘱条目场景（以药品临嘱为例，涉及到预扣和恢复预扣）
3、文档：向文档增加删除药品临嘱时序图
4、实现模型：调整工程整体结构，从domain中分离出围绕医嘱执行的entity，创建hs-entity（采用黑盒复用）
5、设计模型：更新组件关系图



2017.02.07 分布抽象医嘱和具体医嘱，增加【医嘱类型应用】

1、设计模型：向【取消医嘱用例实现】章节增加【取消检查单上的一个检查项目】时序图
2、文档：增加数据模型章节，通过powerdesigner逆向得到物理数据模型
3、设计模型：将order定位于抽象的医嘱开立和执行，将具体的医嘱开立和执行分布到各个子模块中（inpatientdept【医生、护士站】、pharmacy【药房】、inspect【医技科室】）
4、分析模型：将医嘱用法（OrderUseMode）改为药品用法（DrugUseMode）
5、设计模型：创建医嘱类型应用（OrderTypeApp）抽象类，将药品用法直接和医嘱条目关联变为与医嘱条目和医嘱类型之间的关系进行关联，增强医嘱的稳定性
6、文档：补充数据模型，更新医嘱分解相关时序图
7、文档：更新可变性设计《医嘱条目的分解取决于医嘱类型应用（OrderTypeApp）》
8、文档：修正了《管理和协作逻辑与领域逻辑的区分》章节中的部分文字描述


2017.01.23 检查医嘱

1、设计模型：建立InspectOrderType、InspectArrangeOrderExecute、InspectConfirmOrderExecute、InspectApply、InspectResult、InspectItem等用于编写检查流程
2、设计模型：向application增加InspectAppService，用于模拟检查科室操作
3、文档：增加【管理和协作逻辑与领域逻辑的区分】章节
4、实现模型：编写检查流程
5、设计模型：建立InspectDept，用于建模检查科室
6、文档：更新【服务依赖关系图】
7、实现模型：以检查业务为例，编写检查业务相关的应用层业务逻辑（InspectAppService）
8、设计模型：创建检查申请项目（InspectApplyItem），实现一个检查申请单根据检查项目向不同的检查科室发出检查申请


2017.01.20

1、设计模型：将长期医嘱频率对象化（OrderFrequencyType），将不同频率的分解逻辑分布到子类上
2、文档：向可变性设计章节中增加长嘱分解涉及的可变性设计（频率、用法）
3、设计模型：医嘱条目核对后回调所属医嘱类型上的回调方法（如：出院医嘱核对后设置计划出院时间）
4、实现模型：将医嘱发送的时间间隔变化到明天中午12前的执行条目全部发送
5、文档：向设计模型中增加设计原则和设计思路
6、设计模型：增加辅材（AssistMaterial）
7、设计模型：将药品医嘱的分解具体算法再次委托给医嘱条目
8、实现模型：将医嘱分解产生的执行条目的增加方式由函数返回值改为在函数内部增加（增强医嘱分解成执行条目的内存实时性【为绑定辅材的收费方式解析服务】）
9、实现模型：增加辅材自动扣费逻辑（可以按频次收取、可以只收一次）

2017.01.17

1、实现模型：将所有Repo的访问修饰符由公开调整为包内可访问
2、设计模型：将医嘱执行条目与计费项目的多对一关系调整为多对多关系
3、实现模型：创建有截至日期的输液长期医嘱
4、实现模型：在医嘱分解和执行条目发送动作后，系统根据系统时间和执行条目的计划开始时间自动计算状态（待执行/执行中）【不包括待发送状态】
5、设计模型：创建医嘱用法（OrderUseMode），并被药品医嘱类型（DrugOrderType）调用，完成医嘱的分解，在医嘱用法（OrderUseMode）上绑定计费项目（ChargeItem）
6、实现模型：在输液长期医嘱场景中通过医嘱用法绑定计费项目实现了在执行输液长期医嘱时自动收辅材费
7、设计模型：创建OrderCreateCommand，用于在创建医嘱时创建组合或单条医嘱
8、实现模型：实现了5%葡萄糖+头孢3的组合医嘱的创建、执行和收费
9、实现模型：在医嘱执行时增加时间的限制（只能提前半小时执行医嘱执行条目）
10、文档：向测试设计增加数据准备章节，并丰富治疗阶段的测试场景（长嘱）

2017.01.03

1、实现模型：编写出院登记用例
2、设计模型：更新实体结构图（LeaveHospitalOrderType、LeaveHospitalRegisterOrderExecute、LeaveHospitalBalanceOrderExecute）
3、设计模型：更新了出院登记用例实现
4、设计模型：更新同意退费用例实现
5、实现模型：创建了一个二级护理长嘱（完成长期医嘱的分解、执行、自动收费）
6、文档：在设计模型下增加测试设计，并进行了初始化
7、帮助文档：将domain导出为javadoc，为二次开发人员提供使用帮助，将application和listener作为开源demo


2016.12.28

1、设计模型：创建OrderExecuteTeam用于分解医嘱时使用
2、实现模型：优化医嘱分解逻辑
3、设计模型：完成执行条目发送、启动、完成（不携带收费）三个用例
4、实现模型：通过OrderExecuteFinishedEventListenter实现了自动收费
5、实现模型：完成作废临时医嘱用例（自动退费）
6、设计模型：建立医嘱执行条目（OrderExecute）与计费项目（ChargeItem）间的关联
7、设计模型：更新了摆药和取消摆药用例实现（采用医嘱执行条目驱动完成业务）
8、文档：创建可变性设计章节
9、可变性设计：医嘱条目的分解取决于医嘱类型
10、可变性设计：医嘱执行条目的完成和作废可以根据不同的条目类型嵌入业务逻辑
11、可变性设计：医嘱执行条目到收费条目的映射


2016.12.23

1、实现模型：将hs-portal修改为hs-portal-thymeleaf，并创建hs-portal-swing，希望内核代码即可以运行在BS结构中也可以运行在CS结构中
2、实现模型：初始化药品规格、药品、医嘱类型基础数据
3、实现模型：初始完成开立药品临时医嘱用例（仅指定药品规格和数量，程序自动分析药房和药品，并将其转化成医嘱类型）
4、实现模型：创建OrderCreatedEvent事件用于扩展业务逻辑
5、设计模型：在医嘱条目（Order）直接关联科室（Dept），用以记录医嘱条目所属的科室（不通过Doctor间接关联的原因是Doctor换科室就不能准确记录了）
6、实现模型：修正缺欠 获得需要接诊的患者列表（getNeedReceiveVisits）增加参数人员（Staff）
7、实现模型：创建OrderException 继承 HsException，用以更精确记录医嘱相关异常信息
8、设计模型：更新【核对药品临时医嘱】用例实现
9、设计模型：将原Dept拆分为Dept和InPatientDept，将Pharmacy继承新的Dept
10、业务分析模型：更新医嘱执行条目主状态图
11、实现模型：初始完成临时医嘱核对用例，自动完成分解


2016.12.21

1、实现模型：增加initData，用于初始化组织、用户、药品类型、医嘱类型等基础数据
2、设计模型：创建【Staff】用于建模医院内一般员工（住院处送诊人、收费处收费员等）
3、业务分析模型：主流程图中【医嘱相关扣费】和【记录成本】修改为成对执行，并调整相关的子流程
4、实现模型：将接诊护士建模为【Staff】
5、实现模型：完成了组织、用户、计费项目的基础数据初始化
6、设计模型：调整【预存住院费用用例实现】，将initAccount放在Visit上
7、实现模型：将AppTest由hs-application移入到hs-test中，并调整名称为AppWithListenerTest，使其能够动态加载hs-listener代码
8、实现模型：完成了送诊、开户、接诊三个用例的初始编码，创建了患者一次就诊、收费单、病例夹，并通过listener实现了在接诊后自动启动床位费计费的业务


2016.12.20

1、设计模型：更新送诊、预存费用用例实现
2、设计模型：完善类结构图
3、设计模型：增加服务依赖关系图
4、设计模型：精化设计类图
5、实现模型：构建基础运行结构（eclipse\jdk8\maven\springboot等）
6、实现模型：导出设计模型
7、实现模型：以接诊用例为线索完善设计类到运行时的代码，进行entity向table的映射
8、设计模型：将原药品类型（DrugType）拆分为新药品类型（DrugType）和药品规格（DrugTypeSpec），新药品类型与药房是多对一关系（保留库存量属性），药品规格与计费项目关联
9、实现模型：增加UserRole、修改User为AbstractUser

2016.12.16

1、业务分析模型：将出院和转科视为医嘱类型（临时医嘱的子类型），由责任医生下医嘱时选择，而责任护士进行的具体转科和出院登记操作视为执行条目的类型。扣费岗位的【出院结算】也视为执行条目的类型。
2、业务分析模型：增加【描述责任医生下一个出院医嘱场景】。
3、业务分析模型：将责任医生也视为【指令执行者】。
4、在工作目标上增加【对新的方式的说明】。
5、在工作目标上增加【关于简化业务和赋予软件系统更多的职责的思路说明】。
6、分析模型：增加出院登记和出院结算的用例实现。
7、设计模型：增加出院登记和出院结算的用例实现。
8、业务分析模型：向主流程图的出院环节添加注释。
9、分析模型：通过患者一次就诊直接与计费项目关联来计非医嘱产生的费用。
10、更新了部分过时的用例实现。
11、将系统用例模型中在实现环节第一批次要coding的系统用例标成了黄色。


2016.12.14

1、增加了工作目标章节。
2、设计模型：将DrugType（药品类型）中的price（价格）移入到ChargeItem（计费项目）中。
3、分析模型：增加摆药和取消摆药用例实现。
4、分析模型：创建医嘱执行分析包，将医嘱执行应用控制器移入其中，使得住院科室和药房都依赖医嘱执行。
5、设计模型：分析了确认完成执行条目、取消医嘱和同意退费。
6、设计模型：增加摆药和取消摆药用例实现。
7、设计模型：将orderexecute（医嘱执行）移入到了domain中。

2016.12.13

1、采用设计期用例实现的方式分析了送诊、预存费用、接诊用例。
2、引入了DomainEvent来实现计费项目的创建。
3、将分析模型的【执行组】上移到业务实体中。
4、在设计模型中将医嘱按着长期和临时分类的医嘱类型采用继承关系设计，另一个采用包含。
5、采用设计期用例实现的方式分析了下一个药品临时医嘱、核对药品临时医嘱（涉及医嘱分解）、定时启动执行条目。
6、将医嘱的分解委派o医嘱类型来做（增强扩展性）。
7、执行条目本身采用了继承结构（增强扩展性）。
8、对于【定时启动执行条目】这样批量处理执行条目的场景，直接采用sql批量修改的方式修改状态。
9、通过交流回答了疑问章节提出的现存问题。

2016.12.09

1、增加同意退费系统用例。
2、向分析模型中的费用管理增加计费项目，用于周期性收取与医嘱执行无关的其他费用。
3、增加自动分解医嘱用例。
4、增加维护本科室医嘱类型与辅材关系系统用例。
5、向分析模型增加【执行组】概念，用以代表长期医嘱一个频次分解的多条执行条目。
6、增加维护医嘱类型系统用例。
7、增加维护计费项目系统用例。
8、增加取消长期医嘱的一个执行频次系统用例。
9、增加摆药系统用例。
10、增加上传检查结果用例实现。
11、增加疑问章节。
12、模型文件初始化了设计模型。

2016.12.08

1、将系统用例模型中的【审核医嘱】改为【核对医嘱】。
2、将系统用例模型中的【发送医嘱】改为【发送执行条目】。
3、将执行条目的主状态图中的首状态在本科室执行和他科室执行进行区分【已创建/待执行、已创建/待发送】。
4、初始化分析模型，初步分析了八个用例。
5、初始化了实体类结构图，相对业务实体进行了一定简化，以适应软件逻辑的表述。
6、初始化了分析包结构图（分为应用和领域，领域期待可以聚合更多适合多个医院的住院业务逻辑）。
7、增加场景设计【描述责任医生下一个检查医嘱的执行场景】分为两个执行条目：排班和检查。
8、给word文档加了个目录。

2016.12.05

1、以【描述责任医生下一个药品的临时医嘱，用法为口服的执行场景】为例明确描述了一条临时医嘱条目可以对应多条执行条目。
2、对医嘱的删除、作废、停止操作进行了细化，并修改了word文档中的不明确的内容。
3、细化了【描述责任医生下一个手术医嘱场景】。
4、向【建模过程中偏离哈医大二院实际情况的地方】增加了条目。
5、初始化了系统用例模型。

2016.12.02

1、将收费条目向上抽取为费用条目，并创建一个与收费条目对应的成本条目，用于记录成本（在医嘱作废场景下，记录已退费但有成本发生的情况【医院责任】）
2、将软件系统（LIS、PASC、手麻系统等）纳入到指令执行者的抽象岗位管辖范围内。
3、对指令执行的职责进行扩编，增加了记录成本、更新医嘱执行状态、更新就诊患者状态等。
4、更新了指令条目的状态图，将单一状态图一分为三（主状态图、成本状态图、收费状态图），互不干扰。
5、创建了一个【描述责任医生下一个手术医嘱场景】，描述了其完成的步骤和责任岗位。
6、更新【描述责任医生作废一个已收费、并由它科执行的临时医嘱场景】为后处理费用模式。
7、按着新模型的认识，更新word文档中的部分表述。
8、增加了【建模过程中偏离哈医大二院实际情况的地方】章节。

2016.11.28

1、拆分了执行条目的状态图，按着本科执行还是他科执行画了两张图。
2、【描述责任医生取消一个已收费、并由它科执行的医嘱场景】补充了步骤1。
3、将出院部修改为住院处（使其与住院科室并列）。
4、将医嘱类型实体放在了医务科下，并建立了医嘱类型间的依赖关系（皮试用/需皮试）。
5、将配液（执行条目类型）放在配液中心下。
6、将费用类型放在物价科下。
7、将病历类型有关的实体放在了质控下。
8、初始化了一个业务系统关系图。


2016.11.25

1、医嘱条目与医嘱类型关系上医嘱类型方的多重性被修改为n，即医嘱条目可以有多种分类。
2、医嘱类型上增加了自包含关联，即医嘱类型可以有多个层次。
3、将继承执行条目类型的静点改为配液，将静点视为医嘱条目的用法。
4、向业务实体关系图中追加注解。
5、重新整理word文档的目录结构。
6、向word文档中增加指令执行-配液流程。
7、增加场景设计：描述责任医生下一个药品的临时医嘱，用法为口服的执行场景
8、增加创景设计：描述责任医生取消一个已收费、并由它科执行的医嘱场景
9、补了病历有关的业务实体。


2016.11.23

1、细化了出院流程。
2、向扣费岗位增加了【其他费用扣费】业务步骤。
3、在取药流程中说明了扣费的时机。
4、建立了医嘱条目间更紧密的关联关系（一次更大一点的诊疗过程）
5、向执行条目类型下增加了静点子类型。
6、向执行条目状态图中增加了【已停止】状态（对应细化的出院流程）。


2016.11.22

1、更新了执行条目的状态图，增加了【已发送】、【已作废】、【已退费】状态，将补费动作的目标状态由执行中改为待执行，将执行中状态修改为执行中/已收费状态（执行动作触发收费）。
2、更新了主流程图，在患者甬道中增加了预存费用、补费业务步骤。

2016.11.21

1、分解执行记录和按计划发出执行指令对应软件上的审核医嘱和发送医嘱。
2、从业务上看，会诊、转科是否可以理解为医生下医嘱呢？