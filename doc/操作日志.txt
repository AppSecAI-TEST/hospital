2017.07.-- 0.9.4_07

1、实现模型：改进UI界面中医嘱的执行，可以批量执行


2017.07.26 0.9.4_06 优化病历、长嘱执行

1、实现模型：将模拟门诊和住院业务相关的菜单分开
2、实现模型：新增hs-portal Maven Module，用以安放在AppService和Controller之间的BusinessView（业务聚合视图，用以编写基于某一关系的聚合集合【如：医生可操作的患者集合】）【刚哥自己起的】
3、实现模型：整理自动任务，使其能够【重入】，并改善错误处理策略（对于重复执行的任务进行容错处理）
4、实现模型：在界面演示版中完善诊疗信息和病历内容的互动
5、业务模型：住院药房按病区备药仅针对长嘱，临嘱不参与按病区备药，单独执行
6、实现模型：向执行条目上增加医嘱类别属性（orderCategory），以区分长嘱和临嘱
7、实现模型：改进住院发药和配液相关代码（打印病区摆药单和配液单），使其仅针对长嘱，临嘱采用原API（orderExecuteAppService.finish）执行
8、实现模型：向住院业务增加配液执行菜单
9、实现模型：在UI界面上增加合并医嘱功能
10、实现模型：改进UI界面中医嘱的核对、发送可以批量操作（在一个事务中）

2017.07.18 0.9.4_05 联通门诊和住院

1、实现模型：将hs-portal-swing依赖hs-test，并向界面增加生成测试场景数据功能
2、测试模型：将生成门诊出诊计划移到基础数据初始化中
3、实现模型：完成采用界面的形式添加门诊出诊计划
4、实现模型：界面上完成门诊挂号和叫号场景
5、设计模型：将诊室（OutPatientRoom）视为部门（Dept），从属于组织机构树
6、实现模型：界面上实现患者通过开立住院医嘱实现入院的场景，其中入院登记、预存住院费、接诊三个业务动作全部采用统一的医嘱执行页面完成
7、实现模型：统计业务中增加查看病历单功能
8、文档：向可变性设计章节的医嘱执行部分增加统一医嘱执行的待办列表的可变性设计
9、实现模型：取消swing（mysql和h2）启动时自动数据初始化特性，改由统计业务中的按钮（生成测试数据）触发，另h2版本由内存数据库发布模式改为文件数据库发布模式（可以保留演示数据）
10、实现模型：在swing中增加更新模拟系统时间功能，并能够在改变模拟时间时自动触发定时任务，通过这种方式，可以在swing中模拟长嘱执行

2017.07.12 0.9.4_04 精化患者生命周期相关

1、实现模型：完善根据诊疗信息创建病历时的错误处理（对于依赖的诊疗信息没有值的情况抛异常，界面提示先录入诊疗信息）
2、实现模型：增加主诉信息的维护能力
3、实现模型：修改患者出院后，在病历流转过程中对患者一次就诊状态的更新
4、设计模型：保持Visit.dept的内涵（当前患者一次就诊所在部门），在病历移交病案室时一并更新
5、实现模型：创建hs-platform-test，将散落在各处的对平台功能进行测试代码进行归集，调整对第三方jar的依赖
6、实现模型：重构患者病历移交档案室和病历归档中调用策略，生成患者一次就诊日志
7、实现模型：实现了转科医嘱（将患者004由内泌物dept000转到眼科一deptddd），自动停止长嘱，手工退费（当前执行了的二级护理）
8、设计模型：将预存住院费和接诊操作视为入院医嘱分解的执行条目，和原来的入院登记条目和在一起成为三个步骤
9、文档：更新测试设计、设计模型中的实体结构图
10、测试模型：优化入院测试场景代码
11、文档：整理engine对外的API，并生成javadoc


2017.07.06 0.9.4_03 精化病历

1、设计模型：创建MedicalRecordRender，用于展示病历
2、实现模型：将基础数据进行缓存配置
3、实现模型：完成列表诊疗信息值（ListTreatmentItemValue）向列表病历项信息值（ListMedicalRecordItemValue）的转化逻辑，可以锁定患者的临时医嘱单
4、实现模型：修正锁定病历缺欠
5、设计模型：更新了实体结构图中有关病历信息项和诊疗信息项的项关设计
6、分析模型：更新创建病历用例实现、更新实体关系图
7、实现模型：完善列表诊疗信息值（ListTreatmentItemValue）的存储
8、实现模型：调整临时医嘱列表（TemporaryOrderListTreatmentItemSpec）和患者姓名（VisitNameTreatmentItemSpec）中getTheItem方法的内含：由每次都创建改为先获取，得不到时再创建
9、业务模型、分析模型：更新患者出院相关模型-向患者一次就诊业务实体状态图增加状态【在病案室、已归档】，修改患者出院登记用例实现
10、文档：编写介绍PPT《EVE新一代HIS核心系统.pptx》


2017.06.29 0.9.4_02 有了名字-EVE（伊娃）

1、实现模型：统计业务里增加查看医嘱单、医嘱执行单功能
2、文档：增加服务职责编写规范章节
3、实现模型：向TreatmentAppService增加create方法，简化直接采用TreatmentDomainService.create的复杂度
4、实现模型：改进创建有变量业务异常时异常信息的创建方式
5、实现模型：定制启动日志图形[SpringBoot->EVE（伊娃）]，以及Swing主画面
6、实现模型：取消TableModel和ComboBoxModel的Spring托管
7、实现模型：根据临时医嘱列表优化诊疗信息的结构，增加外部表来存储计算患者临时医嘱列表的状态
8、实现模型：编写整理病历功能
9、实现模型：优化病历实体结构，复存各种名称
10、实现模型：修改长嘱分解核心bug（创建独立于执行链的单独执行条目，用于门诊收输液辅材费）
11、实现模型：创建hs-portal-swing-h2和hs-portal-swing-mysql,分离研发和发布
12、实现模型：增加了主题介绍页面


2017.06.23 0.9.4_01 创建版本号生成exe

1、实现模型：创建hs-data-init-test，将hs-data-init中的test相关代码移入，解除hs-data-init对具体数据库类型的依赖
2、部署模型：采用工具exe4j创建Hospital64.exe，依赖内存数据库H2
3、文档：增加对部署模型中演示模式的描述
4、实现模型：创建VersionUtil，主窗口中显示版本信息

2017.06.23 丰富swing功能

1、实现模型：实现了swing下开药品临嘱，核对医嘱，放宽了医嘱核对相关的人员类型由Nurse变成AbstractUser
2、实现模型：将getNeedSendOrderExecutes由OrderAppService移到OrderExecuteAppService中
3、实现模型：向Order、OrderExecute、Prescription复存患者姓名、所属部门名称、执行部门名称、创建者名称等，用于提高查询性能
4、实现模型：在创建医嘱时重新获取最新的患者一次就诊信息
5、设计模型、文档：完善患者离院场景下涉及的engine接口相关的设计和文档
6、实现模型：改进创建医嘱条目时的校验结构（将check由Order上移到OrderCreateCommand中）
7、实现模型：增加合并医嘱方法
8、实现模型：向swing统计业务增加查看患者收费单功能
9、实现模型：实现了swing下执行医嘱场景，目前swing可以开立的医嘱有护理医嘱、药品临嘱、药品长嘱、出院医嘱
10、实现模型：向swing新增了日期、数字录入的控件，并改进性别、医嘱开立位置等常量列表控件数据获取方式
11、实现模型：升级核心底层jar的版本到最新spring4.3.7->4.3.9，hibernate5.1.0->5.2.10, springboot1.5.2->1.5.4, springcloud1.2.0->1.2.2，发现启动时间从26秒降低到20秒了


2017.06.20 OrderBuilder

1、设计模型、文档：记录swing编程模式
2、实现模型：修改患者入院场景缺欠（通过住院病区而不住院科室将患者接到病房）
3、实现模型：建构医嘱开立页面
4、设计模型：创建OrderBuilder接口，用于简化开立医嘱时的复杂度（原接口可继续使用）
5、实现模型：创建多个OrderBuilder实现类（TemporaryDrugOrderBuilder、LongDrugOrderBuilder、NursingOrderBuilder、PrescriptionBuilder），改进药品医嘱创建方式
6、文档：在可变性设计章节增加开立医嘱主题

2017.06.14 丰富测试模型 启动Swing界面编写

1、测试模型：引入住院患者004，使得住院场景同一时刻有两个患者（001和004，001为门诊转入）
2、实现模型：修正入院医嘱缺欠（未设置责任医生）
3、测试模型：向患者004增加二级护理医嘱、出院医嘱
4、设计模型：医嘱引擎核心调整，将医嘱类型（OrderType）由OrderTypeApp调整到Order中，解除OrderTypeApp作为协调者角色
5、实现模型：向护理医嘱增加业务校验，同一时刻一个患者不能有两个处于执行中的护理医嘱
6、测试模型：为患者004开立临时药品医嘱，并与患者001开立的药品临时医嘱设计到一个摆药单上进行摆药和发药
7、实现模型：将患者复诊场景下的复诊操作提升到领域层VisitDomainService.repeat
8、实现模型：改进门诊患者自动切换离院状态逻辑
9、测试模型：增加超级管理员admin001【孙尚香】，作为参数参与所有自动运行的场景
10、实现模型：创建hs-data-init maven moudle，用于聚集业务数据初始化相关代码，可以在test和swing都使用到
11、实现模型：整理swing界面，完成基于swing界面的接诊、预存住院费场景


2017.06.09 优化医嘱执行和药房的接口

1、分析模型：更新了分解医嘱、发送医嘱条目、完成医嘱条目用例实现，更改了分析包结构图
2、分析、设计、实现模型：增加了摆药窗口、向OrderExecute增加doExecuteBefore，向DispensingDrugOrderExecute的doExecuteBefore中增加自动计算摆药窗口代码
3、设计模型：为药房医嘱执行补丁增加基础抽象类DrugOrderExecute，用以被药房业务的执行条目继承
4、用例模型：调整药房有关系统用例，区分了住院和门诊
5、实现模型：模仿配液单完成基于摆药单的住院摆发药工作场景
6、文档：更新药房应用主结构图
7、测试文档：区分住院、门诊、配液中心的测试相关信息
8、实现模型：优化医嘱执行收费相关逻辑（集中处理执行条目上的收费状态、成本状态）
9、实现模型：补充测试验证模块（CheckTestService）
10、实现模型：改进医嘱执行与药房间的接口，在接口上隐藏药品库存（DrugType）
11、分析、设计模型：同步医嘱执行与药房间的接口相关的设计内容
12、分析模型：同步药品医嘱执行相关用例实现及分析类结构图

2017.06.05 基于配液单的配液工作场景，状态报告

1、实现模型：已住院病区和配液批次为聚合配液执行条目的方式编程配液中心的配液场景（配液单）
2、系统用例模型、分析、设计：增加完成一次配液任务用例，并分析实现之，并调整打印配液任务用例相关分析和设计
3、实现模型：完成基于配液单的配液工作场景
4、文档：完成状态报告2017-6-2的编写


2017.05.31 创建住院病区，细化药房业务

1、业务分析模型：重构门诊发药流程，细化为预摆药和现摆药两种模式
2、业务分析模型：重构住院配液、发药业务流程，以住院病区等为单位生成执行任务
3、分析模型：重构组织结构，引入住院病区，将患者一次就诊分别挂在科室和住院病区下，将住院护士调整为隶属于住院病区
4、分析模型：创建【执行条目过滤器】用以生成住院业务中的批量医嘱执行任务，如：一次配液
5、系统用例和分析模型：创建打印配液任务用例，并分析之
6、设计和实现模型：调整引入住院病区后的设计和代码
7、测试模型：创建独立的内泌五护士站、配液中心部门，将护士纳入到内泌五护士站独立管理，创建配液中心摆药、配液、发药岗位
8、测试模型：为配液中心独立创建药品库存，使得同一药品【头孢3和5%葡萄糖液】在门诊和住院有不同的库存记录
9、测试模型：更新测试数据文档


2017.04.17 卷土重来

1、实现模型：将检查安排的时间设置由InspectDomainService.arrange中移入到InspectArrangeOrderExecute.doFinish中
2、实现模型：按着药房应用的模式调整其他应用
3、实现模型：编程engine中Visit组件第一个粗粒度接口：患者离院
4、实现模型：恢复2017.03.30中3、4、5，并创建hs-engine-interface-impl、hs-engine-interface-stub和hs-engine-rest三个moudle用于编写引擎接口
5、实现模型：升级了基础设施（springboot 1.3.5->1.5.2, springcloud ->1.2.0, springcloudeureka -> 1.3.0, spring -> 4.3.7）
6、实现模型：跑通了通过engine实现的患者离院


2017.04.11 优化医嘱、药品医嘱、药房三者间的关系

1、实现模型：增加VisitOutWardedEvent、VisitOutHospitalEvent等事件，通过监听VisitOutWardedEvent实现停止床位费计费
2、实现模型：优化二级护理医嘱类型，使其成为护理医嘱类型，可容纳一级和特级等其他护理级别
3、实现模型：在住院场景中切换护理类型（停止一级护理医嘱条目，创建二级护理医嘱条目）
4、文档：同步测试设计文档（增加门诊输液长嘱、住院切换护理级别长嘱）
5、实现模型：补充医嘱执行相关逻辑（向医嘱执行条目上增加“是否主执行条目”信息项，用于说明在一个临嘱分解过程中产生多条执行条目时那一条是关键执行步骤）
6、数据模型：将各个app相关的表以app开头
7、实现模型：将处方（Prescription）和辅材（AssistMaterial）上移到药房（pharmacy）App
8、设计模型：将DrugType由DrugOrderType中移入到DrugOrderTypeApp中，并将DrugOrderType中的DrugTypeSpec由@Transient变为持久化状态
9、设计模型：优化医嘱、药品医嘱、药房三者间的关系，使药品医嘱依赖医嘱和药房，开发期与药房紧密，运行期与医嘱紧密

2017.04.07 修正环境上下文错误的启动两次Spring

1、实现模型：退回到微服务尝试之前的状态保留上一版本1和2的进展，回退3、4、5
2、实现模型：将engine里的Sevice中负责数据初始化的Api分离到AdminService中
3、实现模型：基于门诊统一收费方式，优化医嘱执行过程中记录成本和费用的方式（为ChargeOrderExecute创建chargeId）
4、实现模型：优化医嘱分解（将Id关联改为对象关联、采用单独保存分解的医嘱执行条目的方式实现执行条目的持久化）
5、实现模型：修正技术框架错误的启动两次Spring造成在个别场景下由于事务嵌套带来的数据不一致的问题

2017.03.30 SpringCloud尝试

1、设计模型：将app中的部分应用（cost、inpatient[order、medicalrecord]、treatment）下移到engine中，并在engine中增加application层
2、实现模型：增加engine-interface，将engine提供的服务升级为接口
3、实现模型：创建engine-server，使得engine可以独立启动
4、实现模型：创建test-local，用于配置运行单进程环境
5、实现模型：改进app的依赖方式，使得app只依赖engine-interface，在运行环境下(hs-test-local)通过引入engine-core选择本地实现完成运行


2017.03.29 重大结构调整

1、设计模型：将服务于理解业务连续性和复杂性的软件结构调整为可为分布多个物理业务系统做准备的软件结构
   （portal.listener.application.domain.entity.platform -> portal.app.engine.platform）
   将原domain中的核心模块与entity合并形成engine，将原domain中其他模块与application中的模块按业务合并为各个独立的app


2017.03.28 补补漏

1、实现模型：优化医嘱频次相关基础类
2、设计模型：优化医嘱执行条目的费用和成本状态图，改造收费组件，使其能够跟踪灵活的费用和成本变化（住院输液费用和成本同时产生，门诊输液费用先产生成本后产生）
3、实现模型：完成门诊输液场景（统一缴费【药费、材料费】、取药，分时输液）
4、实现模型：住院长嘱分解以天为单位按需分解；门诊长嘱开立时一次性分解完，用于生成费用，统一收费
5、文档：业务分析模型、设计模型，同步医嘱新的相关设计，以使得医嘱适应门诊和住院
6、实现模型：完善、补充围绕患者一次就诊状态变化有关的代码
7、实现模型：将DomainService的方法参数以Entity的方式定义（提高性能）

2017.03.23 业务日志

1、设计模型：向Org增加门诊收费部（outChargeDept）和住院收费处（inChargeDept）
2、实现模型：将门诊场景下的医嘱执行中涉及收费的部分改为人为任务
3、测试模型：创建门诊收费部（dept777）和门诊收费部收费员（staff701）
4、设计模型：增加【处方】，调整门诊取药流程（业务分析模型）
5、实现模型：增加中药房，模拟开草药方，到中药房取药
6、实现模型：对核心实体层和领域层补充业务日志


2017.03.16 将病历移入到核心实体层

1、实现模型：向门诊业务中增加编写病历业务
2、设计模型：改变病历夹创建时机（将患者进入病房提前至患者一次就诊创建时）、增加锁定病历操作
3、实现模型：增加核心实体以及领域逻辑的代码注释
4、实现模型：精化费用记录，增加费用类型
5、实现模型：整理无用代码
6、设计模型：向医嘱执行条目完成接口（OrderExecute.finish）增加传递信息到自己子类的手段（params）
7、文档：增加部署说明
8、实现模型：将medicalrecord中的实体移入到核心实体层
9、设计模型：向病历夹增加消费额度累计属性，使得在预交金模式和非预交金模式下都有效
10、业务分析模型：合并病历项目类型和诊疗项目类型两个业务实体，并更新病历、患者、诊疗信息有关的业务实体关系图
11、实现模型：通过在TreatmentItemValue身上增加抽象的toMedicalRecordItemValue方法清除MedicalRecordItemValueFactory
12、业务分析模型：增加疾病实体
13、实现模型：在门诊场景下为患者001增加诊断，并通过设置门诊记录病历包含患者的诊断信息，使其患者001的诊断信息出现在门诊记录中，并通过锁定病历固化该诊断


2017.03.13 关联门诊和住院

1、实现模型：完成门诊开药医嘱
2、实现模型：完成复诊场景
3、实现模型：完成门诊开立住院医嘱
4、设计模型：根据以上场景调整医嘱模块，使其适应门诊业务
5、实现模型：以测试患者001为线索编写衔接门诊和住院的场景（门诊初诊、门诊复诊、住院、治疗、出院、病历归档）
6、设计模型：创建收费单收费模式属性，并调整预存住院费、挂号、续费、收费等与费用相关的所有场景


2017.03.08 完成挂号业务

1、业务分析模型：初始化患者一次就诊状态图
2、设计模型：将设计模型中的患者一次住院（Visit）的含义扩大，包含门诊
3、设计模型：设计挂号相关的内容：挂号（Voucher）、门诊医生排班记录（OutPatientPlanRecord）
4、文档：调整设计模型下的主结构图和实体结构图
5、实现模型：实现了叫号用例
6、测试场景：补充了门诊挂号和叫号场景


2017.03.01 起始门诊业务（并对住院业务做个状态报告）

1、实现模型：编写【提交病历到质控】和【归档病历】场景
2、设计模型：引入【患者】实体，并在送诊时自动创建
3、实现模型：将测试场景在时间上拉伸为患者多次入院（5次），验证患者实体创建的个数

4、业务分析模型：增加门诊看病业务流程，并重构住院业务相关业务分析模型，使得该业务分析模型可以统一考虑门诊和住院
5、系统用例模型：增加门诊相关系统用例


2017.02.22 病历创建器

1、设计模型：以简化的入院记录（只有患者名称和主诉）为例，设计了病历的初始化、创建和获取，并深入依赖诊疗信息模块
2、文档：补充了时序图，更新了类图
3、设计模型：设计病历签名场景（签名前，病历数据与诊疗数据共享，签名后解除共享，并保持病历数据不变）
4、文档：更新分析模型的总体结构图
5、实现模型：编写入院记录生成过程
6、文档：补充入院记录测试设计
7、实现模型：编写临时医嘱单病历生成过程
8、实现模型：编写检查单类型病历生成过程
9、文档：更新设计模型中的【实体结构图】


2017.02.14 好日子

1、数据模型: 调整医嘱条目（Order）和医嘱类型应用（OrderTypeApp）一对一关系的方向（由OrderTypeApp2Order变为Order2OrderTypeApp）
2、实现模型：编写删除医嘱条目场景（以药品临嘱为例，涉及到预扣和恢复预扣）
3、文档：向文档增加删除药品临嘱时序图
4、实现模型：调整工程整体结构，从domain中分离出围绕医嘱执行、诊疗基础数据的entity，创建hs-entity（采用黑盒复用）
5、设计模型：更新组件关系图
6、实现模型：采用mvc模式初始化swingUI，模拟登陆和接诊操作
7、设计模型：初始化了病历结构，将其持久化放在新模块诊疗信息（treatment）中，并更新了文档中的主设计结构图
8、实现模型：初始化了hibernate的二级缓存，用于缓存不易发生变化的诊疗基础数据（如：诊疗信息项目类型）


2017.02.07 分布抽象医嘱和具体医嘱，增加【医嘱类型应用】

1、设计模型：向【取消医嘱用例实现】章节增加【取消检查单上的一个检查项目】时序图
2、文档：增加数据模型章节，通过powerdesigner逆向得到物理数据模型
3、设计模型：将order定位于抽象的医嘱开立和执行，将具体的医嘱开立和执行分布到各个子模块中（inpatientdept【医生、护士站】、pharmacy【药房】、inspect【医技科室】）
4、分析模型：将医嘱用法（OrderUseMode）改为药品用法（DrugUseMode）
5、设计模型：创建医嘱类型应用（OrderTypeApp）抽象类，将药品用法直接和医嘱条目关联变为与医嘱条目和医嘱类型之间的关系进行关联，增强医嘱的稳定性
6、文档：补充数据模型，更新医嘱分解相关时序图
7、文档：更新可变性设计《医嘱条目的分解取决于医嘱类型应用（OrderTypeApp）》
8、文档：修正了《管理和协作逻辑与领域逻辑的区分》章节中的部分文字描述


2017.01.23 检查医嘱

1、设计模型：建立InspectOrderType、InspectArrangeOrderExecute、InspectConfirmOrderExecute、InspectApply、InspectResult、InspectItem等用于编写检查流程
2、设计模型：向application增加InspectAppService，用于模拟检查科室操作
3、文档：增加【管理和协作逻辑与领域逻辑的区分】章节
4、实现模型：编写检查流程
5、设计模型：建立InspectDept，用于建模检查科室
6、文档：更新【服务依赖关系图】
7、实现模型：以检查业务为例，编写检查业务相关的应用层业务逻辑（InspectAppService）
8、设计模型：创建检查申请项目（InspectApplyItem），实现一个检查申请单根据检查项目向不同的检查科室发出检查申请


2017.01.20

1、设计模型：将长期医嘱频率对象化（OrderFrequencyType），将不同频率的分解逻辑分布到子类上
2、文档：向可变性设计章节中增加长嘱分解涉及的可变性设计（频率、用法）
3、设计模型：医嘱条目核对后回调所属医嘱类型上的回调方法（如：出院医嘱核对后设置计划出院时间）
4、实现模型：将医嘱发送的时间间隔变化到明天中午12前的执行条目全部发送
5、文档：向设计模型中增加设计原则和设计思路
6、设计模型：增加辅材（AssistMaterial）
7、设计模型：将药品医嘱的分解具体算法再次委托给医嘱条目
8、实现模型：将医嘱分解产生的执行条目的增加方式由函数返回值改为在函数内部增加（增强医嘱分解成执行条目的内存实时性【为绑定辅材的收费方式解析服务】）
9、实现模型：增加辅材自动扣费逻辑（可以按频次收取、可以只收一次）

2017.01.17

1、实现模型：将所有Repo的访问修饰符由公开调整为包内可访问
2、设计模型：将医嘱执行条目与计费项目的多对一关系调整为多对多关系
3、实现模型：创建有截至日期的输液长期医嘱
4、实现模型：在医嘱分解和执行条目发送动作后，系统根据系统时间和执行条目的计划开始时间自动计算状态（待执行/执行中）【不包括待发送状态】
5、设计模型：创建医嘱用法（OrderUseMode），并被药品医嘱类型（DrugOrderType）调用，完成医嘱的分解，在医嘱用法（OrderUseMode）上绑定计费项目（ChargeItem）
6、实现模型：在输液长期医嘱场景中通过医嘱用法绑定计费项目实现了在执行输液长期医嘱时自动收辅材费
7、设计模型：创建OrderCreateCommand，用于在创建医嘱时创建组合或单条医嘱
8、实现模型：实现了5%葡萄糖+头孢3的组合医嘱的创建、执行和收费
9、实现模型：在医嘱执行时增加时间的限制（只能提前半小时执行医嘱执行条目）
10、文档：向测试设计增加数据准备章节，并丰富治疗阶段的测试场景（长嘱）

2017.01.03

1、实现模型：编写出院登记用例
2、设计模型：更新实体结构图（LeaveHospitalOrderType、LeaveHospitalRegisterOrderExecute、LeaveHospitalBalanceOrderExecute）
3、设计模型：更新了出院登记用例实现
4、设计模型：更新同意退费用例实现
5、实现模型：创建了一个二级护理长嘱（完成长期医嘱的分解、执行、自动收费）
6、文档：在设计模型下增加测试设计，并进行了初始化
7、帮助文档：将domain导出为javadoc，为二次开发人员提供使用帮助，将application和listener作为开源demo


2016.12.28

1、设计模型：创建OrderExecuteTeam用于分解医嘱时使用
2、实现模型：优化医嘱分解逻辑
3、设计模型：完成执行条目发送、启动、完成（不携带收费）三个用例
4、实现模型：通过OrderExecuteFinishedEventListenter实现了自动收费
5、实现模型：完成作废临时医嘱用例（自动退费）
6、设计模型：建立医嘱执行条目（OrderExecute）与计费项目（ChargeItem）间的关联
7、设计模型：更新了摆药和取消摆药用例实现（采用医嘱执行条目驱动完成业务）
8、文档：创建可变性设计章节
9、可变性设计：医嘱条目的分解取决于医嘱类型
10、可变性设计：医嘱执行条目的完成和作废可以根据不同的条目类型嵌入业务逻辑
11、可变性设计：医嘱执行条目到收费条目的映射


2016.12.23

1、实现模型：将hs-portal修改为hs-portal-thymeleaf，并创建hs-portal-swing，希望内核代码即可以运行在BS结构中也可以运行在CS结构中
2、实现模型：初始化药品规格、药品、医嘱类型基础数据
3、实现模型：初始完成开立药品临时医嘱用例（仅指定药品规格和数量，程序自动分析药房和药品，并将其转化成医嘱类型）
4、实现模型：创建OrderCreatedEvent事件用于扩展业务逻辑
5、设计模型：在医嘱条目（Order）直接关联科室（Dept），用以记录医嘱条目所属的科室（不通过Doctor间接关联的原因是Doctor换科室就不能准确记录了）
6、实现模型：修正缺欠 获得需要接诊的患者列表（getNeedReceiveVisits）增加参数人员（Staff）
7、实现模型：创建OrderException 继承 HsException，用以更精确记录医嘱相关异常信息
8、设计模型：更新【核对药品临时医嘱】用例实现
9、设计模型：将原Dept拆分为Dept和InPatientDept，将Pharmacy继承新的Dept
10、业务分析模型：更新医嘱执行条目主状态图
11、实现模型：初始完成临时医嘱核对用例，自动完成分解


2016.12.21

1、实现模型：增加initData，用于初始化组织、用户、药品类型、医嘱类型等基础数据
2、设计模型：创建【Staff】用于建模医院内一般员工（住院处送诊人、收费处收费员等）
3、业务分析模型：主流程图中【医嘱相关扣费】和【记录成本】修改为成对执行，并调整相关的子流程
4、实现模型：将接诊护士建模为【Staff】
5、实现模型：完成了组织、用户、计费项目的基础数据初始化
6、设计模型：调整【预存住院费用用例实现】，将initAccount放在Visit上
7、实现模型：将AppTest由hs-application移入到hs-test中，并调整名称为AppWithListenerTest，使其能够动态加载hs-listener代码
8、实现模型：完成了送诊、开户、接诊三个用例的初始编码，创建了患者一次就诊、收费单、病例夹，并通过listener实现了在接诊后自动启动床位费计费的业务


2016.12.20

1、设计模型：更新送诊、预存费用用例实现
2、设计模型：完善类结构图
3、设计模型：增加服务依赖关系图
4、设计模型：精化设计类图
5、实现模型：构建基础运行结构（eclipse\jdk8\maven\springboot等）
6、实现模型：导出设计模型
7、实现模型：以接诊用例为线索完善设计类到运行时的代码，进行entity向table的映射
8、设计模型：将原药品类型（DrugType）拆分为新药品类型（DrugType）和药品规格（DrugTypeSpec），新药品类型与药房是多对一关系（保留库存量属性），药品规格与计费项目关联
9、实现模型：增加UserRole、修改User为AbstractUser

2016.12.16

1、业务分析模型：将出院和转科视为医嘱类型（临时医嘱的子类型），由责任医生下医嘱时选择，而责任护士进行的具体转科和出院登记操作视为执行条目的类型。扣费岗位的【出院结算】也视为执行条目的类型。
2、业务分析模型：增加【描述责任医生下一个出院医嘱场景】。
3、业务分析模型：将责任医生也视为【指令执行者】。
4、在工作目标上增加【对新的方式的说明】。
5、在工作目标上增加【关于简化业务和赋予软件系统更多的职责的思路说明】。
6、分析模型：增加出院登记和出院结算的用例实现。
7、设计模型：增加出院登记和出院结算的用例实现。
8、业务分析模型：向主流程图的出院环节添加注释。
9、分析模型：通过患者一次就诊直接与计费项目关联来计非医嘱产生的费用。
10、更新了部分过时的用例实现。
11、将系统用例模型中在实现环节第一批次要coding的系统用例标成了黄色。


2016.12.14

1、增加了工作目标章节。
2、设计模型：将DrugType（药品类型）中的price（价格）移入到ChargeItem（计费项目）中。
3、分析模型：增加摆药和取消摆药用例实现。
4、分析模型：创建医嘱执行分析包，将医嘱执行应用控制器移入其中，使得住院科室和药房都依赖医嘱执行。
5、设计模型：分析了确认完成执行条目、取消医嘱和同意退费。
6、设计模型：增加摆药和取消摆药用例实现。
7、设计模型：将orderexecute（医嘱执行）移入到了domain中。

2016.12.13

1、采用设计期用例实现的方式分析了送诊、预存费用、接诊用例。
2、引入了DomainEvent来实现计费项目的创建。
3、将分析模型的【执行组】上移到业务实体中。
4、在设计模型中将医嘱按着长期和临时分类的医嘱类型采用继承关系设计，另一个采用包含。
5、采用设计期用例实现的方式分析了下一个药品临时医嘱、核对药品临时医嘱（涉及医嘱分解）、定时启动执行条目。
6、将医嘱的分解委派o医嘱类型来做（增强扩展性）。
7、执行条目本身采用了继承结构（增强扩展性）。
8、对于【定时启动执行条目】这样批量处理执行条目的场景，直接采用sql批量修改的方式修改状态。
9、通过交流回答了疑问章节提出的现存问题。

2016.12.09

1、增加同意退费系统用例。
2、向分析模型中的费用管理增加计费项目，用于周期性收取与医嘱执行无关的其他费用。
3、增加自动分解医嘱用例。
4、增加维护本科室医嘱类型与辅材关系系统用例。
5、向分析模型增加【执行组】概念，用以代表长期医嘱一个频次分解的多条执行条目。
6、增加维护医嘱类型系统用例。
7、增加维护计费项目系统用例。
8、增加取消长期医嘱的一个执行频次系统用例。
9、增加摆药系统用例。
10、增加上传检查结果用例实现。
11、增加疑问章节。
12、模型文件初始化了设计模型。

2016.12.08

1、将系统用例模型中的【审核医嘱】改为【核对医嘱】。
2、将系统用例模型中的【发送医嘱】改为【发送执行条目】。
3、将执行条目的主状态图中的首状态在本科室执行和他科室执行进行区分【已创建/待执行、已创建/待发送】。
4、初始化分析模型，初步分析了八个用例。
5、初始化了实体类结构图，相对业务实体进行了一定简化，以适应软件逻辑的表述。
6、初始化了分析包结构图（分为应用和领域，领域期待可以聚合更多适合多个医院的住院业务逻辑）。
7、增加场景设计【描述责任医生下一个检查医嘱的执行场景】分为两个执行条目：排班和检查。
8、给word文档加了个目录。

2016.12.05

1、以【描述责任医生下一个药品的临时医嘱，用法为口服的执行场景】为例明确描述了一条临时医嘱条目可以对应多条执行条目。
2、对医嘱的删除、作废、停止操作进行了细化，并修改了word文档中的不明确的内容。
3、细化了【描述责任医生下一个手术医嘱场景】。
4、向【建模过程中偏离哈医大二院实际情况的地方】增加了条目。
5、初始化了系统用例模型。

2016.12.02

1、将收费条目向上抽取为费用条目，并创建一个与收费条目对应的成本条目，用于记录成本（在医嘱作废场景下，记录已退费但有成本发生的情况【医院责任】）
2、将软件系统（LIS、PASC、手麻系统等）纳入到指令执行者的抽象岗位管辖范围内。
3、对指令执行的职责进行扩编，增加了记录成本、更新医嘱执行状态、更新就诊患者状态等。
4、更新了指令条目的状态图，将单一状态图一分为三（主状态图、成本状态图、收费状态图），互不干扰。
5、创建了一个【描述责任医生下一个手术医嘱场景】，描述了其完成的步骤和责任岗位。
6、更新【描述责任医生作废一个已收费、并由它科执行的临时医嘱场景】为后处理费用模式。
7、按着新模型的认识，更新word文档中的部分表述。
8、增加了【建模过程中偏离哈医大二院实际情况的地方】章节。

2016.11.28

1、拆分了执行条目的状态图，按着本科执行还是他科执行画了两张图。
2、【描述责任医生取消一个已收费、并由它科执行的医嘱场景】补充了步骤1。
3、将出院部修改为住院处（使其与住院科室并列）。
4、将医嘱类型实体放在了医务科下，并建立了医嘱类型间的依赖关系（皮试用/需皮试）。
5、将配液（执行条目类型）放在配液中心下。
6、将费用类型放在物价科下。
7、将病历类型有关的实体放在了质控下。
8、初始化了一个业务系统关系图。


2016.11.25

1、医嘱条目与医嘱类型关系上医嘱类型方的多重性被修改为n，即医嘱条目可以有多种分类。
2、医嘱类型上增加了自包含关联，即医嘱类型可以有多个层次。
3、将继承执行条目类型的静点改为配液，将静点视为医嘱条目的用法。
4、向业务实体关系图中追加注解。
5、重新整理word文档的目录结构。
6、向word文档中增加指令执行-配液流程。
7、增加场景设计：描述责任医生下一个药品的临时医嘱，用法为口服的执行场景
8、增加创景设计：描述责任医生取消一个已收费、并由它科执行的医嘱场景
9、补了病历有关的业务实体。


2016.11.23

1、细化了出院流程。
2、向扣费岗位增加了【其他费用扣费】业务步骤。
3、在取药流程中说明了扣费的时机。
4、建立了医嘱条目间更紧密的关联关系（一次更大一点的诊疗过程）
5、向执行条目类型下增加了静点子类型。
6、向执行条目状态图中增加了【已停止】状态（对应细化的出院流程）。


2016.11.22

1、更新了执行条目的状态图，增加了【已发送】、【已作废】、【已退费】状态，将补费动作的目标状态由执行中改为待执行，将执行中状态修改为执行中/已收费状态（执行动作触发收费）。
2、更新了主流程图，在患者甬道中增加了预存费用、补费业务步骤。

2016.11.21

1、分解执行记录和按计划发出执行指令对应软件上的审核医嘱和发送医嘱。
2、从业务上看，会诊、转科是否可以理解为医生下医嘱呢？